# B-1 

计研三一

孙亚男

2020215223

sunyn20@mails.tsinghua.edu.cn



## 实验要求

绘制出星星旋转的效果
1)	多个星星绕着一个中心旋转；
2)	星星的颜色不同；
3)	效果类似螺旋的效果，星星不断向外圈扩散；
4)	至少实现阿基米德螺线、对数螺线、费马螺线中一种的效果；
5)	具体效果参考下图，其中使用的星星图片见附件 Star.bmp。

![1606928417054](C:/Users/80592/AppData/Roaming/Typora/typora-user-images/1606928417054.png)



## 实验原理

该实验需要实现在窗口中的二维图形绘制、纹理贴图、着色和位置变换。故使用GLFW库创建窗口，使用GLAD管理函数指针，使用GLM库进行矩阵变换，使用SOIL库进行纹理加载。



## 实验步骤

1. 创建窗口
   
   - 参见习题课一 Lecture1.cpp窗口创建相关代码
   
2. 绘制图形
   - 参见习题课一 Lecture2.cpp绘制三角形相关代码
   - 绘制若干个平行于xy平面的正方形作为星星
   
4. 图形旋转和平移
   - 参见习题课三 Lecture4.cpp平移相关代码
   
   - 对于不同的图形
     
     - 平移 glm::translate
     
   - 图形平移的坐标通过如下阿基米德螺线公式计算
   
   - ```latex
     x = (α+βθ)cos(θ)
     y = (α+βθ)sin(θ)
     ```
   
4. 图形纹理贴图和着色

   - 着色部分参见习题课二 Lecture3_3.cpp着色相关代码
     - 设置uniform颜色变量用于从主程序中传入颜色
   - 贴图部分参见习题课四 Lecture6_2.cpp贴图相关代码
     - 设置uniform纹理变量用于从主程序中传入纹理



## 实验效果

具体实验效果参见录屏，下图为录屏截图：

![1606928475299](C:/Users/80592/AppData/Roaming/Typora/typora-user-images/1606928475299.png)



![1606928500325](C:/Users/80592/AppData/Roaming/Typora/typora-user-images/1606928500325.png)



![1606928524562](C:/Users/80592/AppData/Roaming/Typora/typora-user-images/1606928524562.png)



可以看出，星星从中心开始向外螺旋发散，当星星数达到预设的最大值时，外围星星消散，中心产生新的星星。



## 实验环境

Visual Studio 2019

GLFW库 3.3.2

GLAD库

GLM库 0.9.6.3



## 实验遇到的问题

给出的Star.bmp图像在四周是不透明的黑色，直接贴图在星星比较密集的中心区域会出现遮挡的情况，需要在片段着色器里设置边缘部分的透明度，此外还需要把深度检测关闭，不然还是会出现遮挡的情况。



为了使刚生成的星星在中心，阿基米德螺线公式中的`α`需要设置为0.0f。