# C-2

计研三一

孙亚男

2020215223

sunyn20@mails.tsinghua.edu.cn



## 实验要求

绘制一个彩色的四棱锥并添加光照效果
a.	四棱锥边长均为 2；
b.	四棱锥各个顶点颜色不同；
c.	四棱锥的中心为（1,2,3）;
d.	要求使用多种光，包括环境光、镜面光和散射光等，可以通过控制物体对光的反射材质因子和不同光的因子达到不同的光照效果。



## 实验原理

该实验需要实现在窗口中的三维图形绘制，为了看到所有面，需要进行位置变换，需要使用三种光照。此外，还需要实现键盘输入控制。故使用GLFW库创建窗口，使用GLAD管理函数指针，使用GLM库进行矩阵变换。



## 实验步骤

1. 创建窗口
  参见习题课一 Lecture1.cpp窗口创建相关代码

2. 绘制图形
  参见习题课四 Lecture6_2.cpp绘制正方形的相关代码

3. 图形旋转
  参见习题课四 Lecture5_4.cpp正方体旋转的相关代码

4. 键盘控制切换效果
  参见习题课四 Lecture5_4.cpp通过键盘控制镜头移动的相关代码

5. 三种光照实现

  参见习题课六 Lecture10_2.cpp在片段着色器中分别对三种光照进行计算后叠加



## 实验效果

![1606665211988](C:/Users/80592/AppData/Roaming/Typora/typora-user-images/1606665211988.png)



其中，左上角四棱锥为光源，可以通过数字1,2,3,4,5分别控制切换 环境光，漫反射光，折射光，物体材质折射系数和不同的发光值，通过键盘↑和↓来调整大小，具体实现参见实验视频。



## 实验环境

Visual Studio 2019
GLFW库 3.3.2
GLAD库
GLM库 0.9.6.3
Simple OpenGL Image Library（SOIL）库



## 实验中遇到的问题

键盘上的单击并不是真正的单击，需要手动置false才能只执行一次。

绘制图形时不能用indices，因为需要计算法向量。